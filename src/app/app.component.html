<main class="relative w-full min-h-screen flex justify-center items-center">

  <div class="flex flex-row items-center absolute top-0 left-0 m-4">
    <img src="logo.png" class="w-40 z-10 mr-2">
    <p class="font-poppins text-2xl z-10 text-pink-500 font-bold">AI-powered diabetes risk prediction</p>
  </div>

  <div
    class="relative flex flex-col justify-center items-center z-10 backdrop-filter backdrop-blur-lg p-10 rounded-lg w-auto">

    <!-- API Key redeeming -->
    <div class="flex flex-row justify-center items-center mt-4">
      <input type="text" id="license-input" placeholder="Enter your license here"
        class="input input-bordered w-full max-w-xs" />
      <button class="btn btn-primary ml-2" (click)="submitApiKey()">Redeem</button>
    </div>

    <div class="flex flex-row justify-center items-center">
      <!-- First the actual button (hidden) and then the visual button -->
      <input type="file" id="fileUpload" accept=".xlsx, .xls" (change)="onFileChange($event)" style="display:none;">
      <button class="font-poppins btn btn-white btn-animate w-60 h-20 m-2 text-3xl rounded-full transform"
        (click)="triggerFileUpload()">Upload File</button>
      <button class="font-poppins btn btn-white btn-animate w-60 h-20 m-2 text-3xl rounded-full transform"
        (click)="submitProfile()">Submit</button>
    </div>

    @if (apiResponse) {
    <pre class="font-poppins text-3xl mt-4">{{ apiResponse | json }}</pre>
    } @else {
    @if (selectedFileName == null) {
    <p class="font-poppins text-3xl mt-4"> Select a file to upload </p>
    } @else {
    <div class="flex flex-row items-center">
      <img src="excel.png" alt="Excel Logo" class="w-10 mr-4">
      <p class="font-poppins text-3xl mt-4">{{ selectedFileName }}</p>
    </div>
    }
    }

  </div>
  <canvas id="canvas" class="absolute top-0 left-0 z-0"></canvas>
</main>